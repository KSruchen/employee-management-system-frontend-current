-- DROP if already exists (safe for repeat runs)
BEGIN
  EXECUTE IMMEDIATE 'DROP TABLE DIVISION CASCADE CONSTRAINTS';
EXCEPTION WHEN OTHERS THEN NULL;
END;
/
BEGIN
  EXECUTE IMMEDIATE 'DROP TABLE DIRECTORATE CASCADE CONSTRAINTS';
EXCEPTION WHEN OTHERS THEN NULL;
END;
/

-- CREATE Tables
CREATE TABLE DIRECTORATE (
  DIRECTORATE_ID NUMBER GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
  NAME VARCHAR2(50) NOT NULL
);
CREATE TABLE DIVISION (
  DIVISION_ID NUMBER GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
  NAME VARCHAR2(50) NOT NULL,
  DIRECTORATE_ID NUMBER REFERENCES DIRECTORATE(DIRECTORATE_ID)
);

-- INSERT Directorates
INSERT INTO DIRECTORATE (NAME) VALUES ('DIT');         -- 1
INSERT INTO DIRECTORATE (NAME) VALUES ('DWST');        -- 2
INSERT INTO DIRECTORATE (NAME) VALUES ('DOVI');        -- 3
INSERT INTO DIRECTORATE (NAME) VALUES ('HR');          -- 4
INSERT INTO DIRECTORATE (NAME) VALUES ('FINANCE');     -- 5
INSERT INTO DIRECTORATE (NAME) VALUES ('SUPPORT');     -- 6

-- INSERT Divisions for DIT
INSERT INTO DIVISION (NAME, DIRECTORATE_ID) VALUES ('SDD', 1);
INSERT INTO DIVISION (NAME, DIRECTORATE_ID) VALUES ('CNN', 1);
INSERT INTO DIVISION (NAME, DIRECTORATE_ID) VALUES ('NETWORK', 1);
INSERT INTO DIVISION (NAME, DIRECTORATE_ID) VALUES ('SYSTEMS', 1);

-- INSERT Divisions for DWST
INSERT INTO DIVISION (NAME, DIRECTORATE_ID) VALUES ('WATER MGT', 2);
INSERT INTO DIVISION (NAME, DIRECTORATE_ID) VALUES ('SEWERAGE', 2);
INSERT INTO DIVISION (NAME, DIRECTORATE_ID) VALUES ('STORM WATER', 2);

-- INSERT Divisions for DOVI
INSERT INTO DIVISION (NAME, DIRECTORATE_ID) VALUES ('OPERATIONS', 3);
INSERT INTO DIVISION (NAME, DIRECTORATE_ID) VALUES ('FIELD', 3);
INSERT INTO DIVISION (NAME, DIRECTORATE_ID) VALUES ('MAINTENANCE', 3);

-- INSERT Divisions for HR
INSERT INTO DIVISION (NAME, DIRECTORATE_ID) VALUES ('RECRUITMENT', 4);
INSERT INTO DIVISION (NAME, DIRECTORATE_ID) VALUES ('PAYROLL', 4);
INSERT INTO DIVISION (NAME, DIRECTORATE_ID) VALUES ('WELFARE', 4);

-- INSERT Divisions for FINANCE
INSERT INTO DIVISION (NAME, DIRECTORATE_ID) VALUES ('BUDGET', 5);
INSERT INTO DIVISION (NAME, DIRECTORATE_ID) VALUES ('AUDIT', 5);

-- INSERT Divisions for SUPPORT
INSERT INTO DIVISION (NAME, DIRECTORATE_ID) VALUES ('IT HELPDESK', 6);
INSERT INTO DIVISION (NAME, DIRECTORATE_ID) VALUES ('PROCUREMENT', 6);

COMMIT;